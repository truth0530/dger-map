/* ======================== 컴팩트 팝업 스타일 (B옵션) ======================== */

/* MapLibre 팝업 컨테이너 - 다크모드 */
.maplibre-popup-custom.popup-dark .maplibregl-popup-content {
  padding: 0;
  background: #1f2937;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.1);
  overflow: hidden;
}

.maplibre-popup-custom.popup-dark .maplibregl-popup-tip {
  border-top-color: #1f2937;
}

/* MapLibre 팝업 컨테이너 - 라이트모드 */
.maplibre-popup-custom.popup-light .maplibregl-popup-content {
  padding: 0;
  background: #F5F0E8;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(74, 93, 93, 0.15), 0 2px 6px rgba(0,0,0,0.08);
  border: 1px solid #d4cdc4;
  overflow: hidden;
}

.maplibre-popup-custom.popup-light .maplibregl-popup-tip {
  border-top-color: #F5F0E8;
}

/* Leaflet 팝업 컨테이너 - 다크모드 */
.leaflet-popup-custom.popup-dark .leaflet-popup-content-wrapper {
  padding: 0;
  background: #1f2937;
  border-radius: 8px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.1);
}

.leaflet-popup-custom.popup-dark .leaflet-popup-content {
  margin: 0;
  padding: 0;
  color: #f1f5f9;
}

.leaflet-popup-custom.popup-dark .leaflet-popup-tip {
  background: #1f2937;
  border: none;
  box-shadow: none;
}

/* Leaflet 팝업 컨테이너 - 라이트모드 */
.leaflet-popup-custom.popup-light .leaflet-popup-content-wrapper {
  padding: 0;
  background: #F5F0E8;
  border-radius: 8px;
  box-shadow: 0 4px 20px rgba(74, 93, 93, 0.15), 0 2px 6px rgba(0,0,0,0.08);
  border: 1px solid #d4cdc4;
}

.leaflet-popup-custom.popup-light .leaflet-popup-content {
  margin: 0;
  padding: 0;
  color: #1f2937;
}

.leaflet-popup-custom.popup-light .leaflet-popup-tip {
  background: #F5F0E8;
  border: none;
  box-shadow: none;
}

.leaflet-popup-custom .leaflet-popup-close-button {
  display: none;
}

/* Leaflet 팝업 tip 위치 조정 - 마커와 겹치지 않도록 */
.leaflet-popup-custom .leaflet-popup-tip-container {
  margin-top: -1px;
}

/* 팝업이 마우스 이벤트를 가로채지 않도록 - 마커 간 깜빡임 방지 */
.leaflet-popup-custom {
  pointer-events: none;
}

.leaflet-popup-custom .leaflet-popup-content-wrapper,
.leaflet-popup-custom .leaflet-popup-tip-container {
  pointer-events: none;
}

/* 팝업 내용 - 컴팩트 */
.popup-content {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

/* ======================== Leaflet 마커 호버 강조 스타일 ======================== */
/*
 * 핵심: Leaflet은 .leaflet-marker-icon에 transform: translate3d(...)로 위치를 지정함
 * 따라서 이 요소에 transform을 적용하면 위치가 (0,0)으로 초기화됨
 * 해결: 내부 .maplibre-marker 요소에만 scale을 적용
 */

/* Leaflet 아이콘 컨테이너 - transform 건드리지 않음, z-index만 조정 */
.leaflet-marker-icon.marker-hovered {
  z-index: 1000 !important;
}

/* Leaflet 위치 애니메이션 비활성화 - 마커 이동 시 불필요한 transition 방지 */
.leaflet-marker-icon,
.leaflet-zoom-animated {
  transition: none !important;
}

/* 내부 마커 요소에만 scale 적용 - Leaflet의 translate 유지 */
.leaflet-marker-icon .maplibre-marker {
  transition: transform 0.1s ease-out, filter 0.1s ease-out;
}

.leaflet-marker-icon.marker-hovered .maplibre-marker {
  transform: scale(1.3);
  filter: drop-shadow(0 2px 8px rgba(0,0,0,0.4));
}
