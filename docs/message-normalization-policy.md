## 메시지 표시 정책 (가독성 + 하이라이트)

이 문서는 응급 메시지에 포함된 긴 표현을 간단하게 축약하는 규칙과,
색상 하이라이트 기준을 함께 설명합니다.
목표는 **가독성 향상**과 **핵심 정보의 빠른 식별**입니다.

---

### 상단 요약

- 요약 통일: 연락/확인 → **이송 전 확인**, 참고/주의 → **참고바람**, 불가능 → **불가**
- 색상 구분: 진료과목(파랑), 의료진/인력(빨강), 장비/기기(초록), 질환/시술(보라), 안내/불가(회색)
- 고유명사 보호: 불가능메시지/불가능메시지등록은 치환·하이라이트 제외

---

## 1) 최종 표기 (요약 문구)

- 연락/확인이 필요한 문장 → **이송 전 확인**
- 참고/주의 안내 문장 → **참고바람**
- 불가능 계열 표현 → **불가**

---

## 2) 요약 분류 기준

### A. 연락/확인 필요 (→ "이송 전 확인")
아래 표현이 포함되면 모두 같은 의미로 봅니다.

- 문의, 연락, 확인, 협의, 상의, 전화, 유선, 핫라인, 사전 문의, 사전 연락, 수용여부

### B. 참고/주의 안내 (→ "참고바람")
연락/확인 의미 없이 안내만 하는 표현:

- 참고, 유의, 주의, 권고

### 우선순위
같은 문장에 **연락/확인 키워드가 하나라도 있으면** “이송 전 확인”이 우선입니다.

---

## 3) 정규식 요약

### 3-1. 연락/확인 계열 (우선 적용)
```regex
(문의|연락|확인|협의|상의|전화|유선|핫라인|사전\\s*문의|사전\\s*연락|수용\\s*여부)
```

### 3-2. 참고/주의 계열
```regex
(참고바람|참고|유의|주의|권고)
```

---

## 4) 적용 순서 (로직)

1. 원문에서 연락/확인 정규식을 먼저 검사  
   - 하나라도 매칭되면 → **"이송 전 확인"** 으로 통일
2. 1번이 아니고, 참고/주의 정규식이 매칭되면  
   - → **"참고바람"**
3. 둘 다 아니면  
   - 원문 유지

---

## 5) 치환 예시

### 연락/확인 계열 → "이송 전 확인"
- “문의 후 이송 부탁드립니다” → **이송 전 확인**
- “내원 전 유선 문의 필요” → **이송 전 확인**
- “사전 연락 후 이송” → **이송 전 확인**
- “수용여부 확인 부탁드립니다” → **이송 전 확인**
- “전화문의(주말/야간)” → **이송 전 확인**
- “핫라인 문의 바랍니다” → **이송 전 확인**

### 참고/주의 계열 → "참고바람"
- “이송시 참고바랍니다” → **참고바람**
- “내원시 참고바랍니다” → **참고바람**
- “진료 제한, 참고 바랍니다” → **참고바람**

### 조건이 섞인 경우 (의미 유지)
조건(시간/대상/질환 등)이 포함된 문장은 **조건을 남기고 표현만 축약**합니다.

- “정규시간 외 수용제한 (사전문의)”  
  → “정규시간 외 수용제한 (이송 전 확인)”
- “당직의 확인 후 수용 가능”  
  → “당직의 확인 후 수용 가능”  
  (의미가 이미 ‘확인’이므로 문장 유지 가능)

---

## 6) UI 표시 원칙

사용자가 왜 짧아졌는지 쉽게 이해할 수 있도록 아래 형태를 권장합니다.

- 원문: 회색 보조 텍스트
- 요약: 굵은 텍스트로 “이송 전 확인” 또는 “참고”
- 예:  
  **이송 전 확인**  
  원문: “119구급대원께서는 문의 후 이송 부탁드립니다”

---

## 7) 주의 사항

- “이송/내원” 단어만으로는 연락 요청이 아님  
  예: “이송시 참고바랍니다” → **참고**
- 연락/확인이 명시되지 않으면 원문 유지

---

## 8) 하이라이트 정책 (색상)

### 색상 정책 요약

- 파란색: 진료과목 (대괄호 포함 또는 과목명 텍스트)
- 빨간색: 의료진/인력 관련
- 초록색: 장비/기기 관련
- 보라색: 질환/수술/시술/증상 관련
- 회색: 불가/안내 문구 (이송 전 확인, 참고바람, 불가 등)

### 하이라이트 규칙 (세부)

#### A. 진료과목 (파란색)
메시지에 `[진료과목]` 접두사가 있거나, 과목명이 텍스트에 포함된 경우.

예:
- `[신경외과] 수용 불가`
- `소아청소년과 정규시간 외 수용제한`

#### B. 의료진/인력 (빨간색)
의료진 부족 또는 인력 관련 표현.

포함 단어:
- 의료진, 교수, 교수님, 교수진, 인력, 전문의

#### C. 장비/기기 (초록색)
장비 문제 또는 가용 상태를 나타내는 표현.

포함 단어 예:
- CT, MRI, X-ray, 초음파, 내시경, 인공호흡기, ECMO, 투석, 혈액투석, 산소, 모니터

#### D. 질환/시술/증상 (보라색)
질환명, 시술/수술, 주요 증상 및 중증 관련 표현.

포함 단어 예:
- 뇌출혈, 뇌경색, 심근경색, 중증, 수술, 외상, 쇼크, 패혈증
- Appendicitis, intubation, 췌장염, 심부전, 신부전
- 안면골절, 안와골절, 개방성 골절, 심부열상 등

#### E. 안내/불가 (회색)
의미를 간단히 통일한 안내 문구 또는 불가 표현.

예:
- 이송 전 확인
- 참고바람
- 불가

---

## 9) 고유명사 예외 처리

다음 문구는 **고유명사**로 간주하며 색상 하이라이트 및 치환 대상에서 제외됩니다.

- 불가능메시지
- 불가능메시지등록
- 불가능메세지 (오타 포함)

---

## 10) 실제 적용 위치

- 하이라이트 로직: `src/lib/utils/messageClassifier.ts`
- 메시지 표시: `src/app/page.tsx`, `src/app/messages/page.tsx`
- 지도 팝업: `src/components/maplibre/LeafletMap.tsx`, `src/components/maplibre/MapLibreMap.tsx`

---

## 11) 유지/수정 원칙

- 새 키워드는 반드시 **정책 분류(진료과목/인력/장비/질환/안내)** 중 하나로 등록
- 회색(안내/불가) 문구는 최대한 간단하게 통일
- 고유명사는 어떤 치환/하이라이트에서도 변형되지 않도록 보호
